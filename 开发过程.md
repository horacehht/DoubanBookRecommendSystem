# 开发过程

## 1.界面制作

该库的学习过程可移步至learn_pyqt5.md文件

### 1.登录/注册界面

```python
import res  # 导入资源文件
import sys
from PyQt5.QtGui import QIcon
from PyQt5.QtWidgets import QLabel, QHBoxLayout, QVBoxLayout, QWidget, QLineEdit, QPushButton, QGridLayout


class Demo(QWidget):
    def __init__(self):
        super(Demo, self).__init__()
        self.resize(400, 200)  # 窗口尺寸
        self.setWindowTitle('豆瓣书籍推荐系统')  # 设置窗口标题
        self.setWindowIcon(QIcon(':res/douban.ico'))  # 设置窗口图标
        self.user_label = QLabel('用户名:', self)  # 文本设置
        self.pwd_label = QLabel('密码:', self)
        self.user_line = QLineEdit(self)  # 单行文本编辑器
        self.pwd_line = QLineEdit(self)
        self.login_button = QPushButton('登录', self)  # 按钮
        self.signin_button = QPushButton('注册', self)

        # 布局实例化
        self.g_layout = QGridLayout()  # 网格布局
        self.h_layout = QHBoxLayout()  # 水平布局
        self.v_layout = QVBoxLayout()  # 垂直布局

        self.layout_init()

    def layout_init(self):
        """布局设置，目的是使init方法看起来简洁
        """

        self.g_layout.addWidget(self.user_label, 0, 0, 2, 1)  # 加入控件
        self.g_layout.addWidget(self.user_line, 0, 1, 2, 1)
        self.g_layout.addWidget(self.pwd_label, 1, 0, 2, 1)
        self.g_layout.addWidget(self.pwd_line, 1, 1, 2, 1)

        self.h_layout.addWidget(self.login_button)  # 添加登录按钮
        self.h_layout.addWidget(self.signin_button)  # 添加注册按钮
        self.v_layout.addLayout(self.g_layout)  # 将布局添加到框的末尾
        self.v_layout.addLayout(self.h_layout)

        self.setLayout(self.v_layout)
```

#### 1.g_layout.addWidget

我用的是重载版本，可通过Qt assistant知其详细用法

![image-20210502173110634](https://horacehhtbucket.oss-cn-guangzhou.aliyuncs.com/img/image-20210502173110634.png)

该单元格将从fromRow, fromColumn开始，跨越rowSpan行和columnSpan列。该小组件将有给定的对齐方式。

会比之前常用的那个addWidget好看

#### 2.数据库操作

查询结果的时候老是说不存在这个列

回去W3School看了看，在jupyter lab上试了一下，结果发现要加引号

![image-20210503141635767](https://horacehhtbucket.oss-cn-guangzhou.aliyuncs.com/img/image-20210503141635767.png)

![image-20210503141723639](https://horacehhtbucket.oss-cn-guangzhou.aliyuncs.com/img/image-20210503141723639.png)

那个'Horace'不加()也行